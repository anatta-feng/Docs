---
title: 打造家庭数据服务
date: 2020-05-26 18:41
id: 60717
---

# 写在前面

自从拾掇好家里的网络后，我这颗喜爱折腾的小心脏，又开始蠢蠢欲动了。![](./_image/2020-05-26/0350.png?r=50)

目前为止，依据家庭的需求（~~其实就是满足我折腾的愿望~~），搞定了**文件服务**、**多媒体服务**还有**笔记服务**。

# 文件服务

先聊生产力。

自从买了相机，电脑的空间日常不够用，512G 的笔记本都存不下了![](./_image/2020-05-26/0190.png?r=50)再加上设备较多，文件也一大把，每次备份或者换设备工作，都很折腾。尝试过云盘和坚果云后，发现他们并不满足自己的需求。所以就计划着把自己的资料都集中托管起来，如此一来可以轻松做到支持多设备共享，备份也比较方便。

皮一下![](./_image/2020-05-26/2160.png?r=50)，以下是一个真实发生在身边的技术改变生活案例：

```
我老婆是从事教育行业的，有非常多的习题、培训等资料。周末她去上课的时候说不想带电脑了，但是电脑里有很多资料上课的时候要用到。我让她把所有的资料都存到 NAS 里，于是老婆开开心心的带着一个平板就出发了。~~让领导享受到你折腾的成果，一定程度上可以让领导更支持你的折腾~~![](./_image/2020-05-26/0340.png?r=50)
```

正经聊

局域网内的文件共享，我比较喜欢用 SMB，用起来基本和本地磁盘没有什么区别。但是千万别把 SMB 服务公开到外网，还记得当年沸沸扬扬的 445 端口事件吗？SMB 是给局域网用的协议，安全性不足，漏洞很多，暴露到外网可能分分钟你的数据就没了![](./_image/2020-05-26/2101.png?r=50)。

外网访问推荐用 FTP，不过 iOS 自带的 `文件` 应用并不支持 FTP，这里推荐使用 `Documents` 应用来替代自带的 `文件` 应用。不仅可以用 FTP，还能浏览 `文件` 、胜任基础的文件编辑工作。最重要的是：**颜值即正义！**

![](./_image/2020-05-26/IMG_0217.png)

至于数据安全，有**数据快照**、**历史版本**、**冷备**等等好多骚操作，还用担心吗？![](./_image/2020-05-26/0140.png?r=50)

# 多媒体服务

>  电影请在档期内前往电影院观影，有硬件条件观看美剧日剧的同学也请尽量支持正版。这里的下载只用于早已过了档期的电影和美剧日剧等。

![](./_image/2020-05-26/2020-05-27-19-54-00.png)

爱奇艺推出了星钻 VIP，本来就对流媒体服务不太满意的我，更不会买会员了![](./_image/2020-05-26/2020.png?r=50)。

身为画质党，一般会选择下载的方式，观看一些已经不在档期的电影。不过直接在文件夹中找到想看的影片然后用播放器播放，观影体验并谈不上友好。

![](./_image/2020-05-26/2020-05-27-21-20-55.png)

如果自己下载的影片也能有在线流媒体那样的**浏览界面**就好了。![](./_image/2020-05-26/0130.png?r=50)

经过一番搜索，有惊喜！市面上有三个服务可以满足我的诉求：

* Plex
* Emby
* Jellyfin

这三个服务都可以实现刮削影片元数据、生成影片墙、同步观看记录、硬解视频等功能。其中 Plex 有提供自己的信息流服务；Emby 和 Jellyfin 都是单纯的多媒体服务。Plex 和 Emby 都需要付费，Jellyfin 是 Emby 的社区版，所以该使用哪个不用说了吧![](./_image/2020-05-26/0140.png?r=50)。下面的界面就是 Jellyfin 的界面：

![](./_image/2020-05-26/2020-05-27-20-40-05.png)

经过实操，发现 Jellyfin 在 iOS 设备上存在特定格式视频**不能播放**的问题。其实 Plex、Emby、Jellyfin 的网页版在 iOS 设备上都存在这个问题。只不过 Plex 和 Emby 有 Native 客户端，所以可以正常播放。Jellyfin 的 iOS 播放器就是个套壳网页，所以完全无法播放。

这就陷入一个很尴尬的境地：不买 Plex 和 Emby 的会员就不能在 iOS 设备上正常观影，免费的 Jellyfin 也不能正常观影。因为 Jellyfin 提供的功能和 Plex、Emby 基本没有区别，也很心去买 Plex 和 Emby 的会员（~~实在太贵了~~）。

![](./_image/2020-05-26/0010.png?r=50)不过生活处处有惊喜，iOS 平台有一个播放器神器：Infuse。通吃 iPhone、iPad 和 Apple TV 三个平台。最关键的是，Infuse 可以接入 Jellyfin，相当于 Jellyfin 做后端，Infuse 做前端，兼容所有常见的格式，完美解决了 Jellyfin 在 iOS 平台的播放问题。

如果不看 4K 视频和杜比音频，那么免费版 Infuse 完全够用了。就算要付费，也要比 Plex 和 Emby 便宜非常多。而且，**颜值即正义！**

![](./_image/2020-05-26/IMG_0218.png)

# 笔记服务

![](./_image/2020-05-26/0171.png?r=50)都折腾了这么多了，干脆再折腾折腾笔记好了。常年以来，我都是用的`文件 + 坚果云`的形式来保存笔记，用着还行，就是检索不太方便。

不用第三方的笔记服务很重要的一个原因就是他们不提供**批量导出**功能，一旦不想用某个笔记服务了，面临的就是损失多年笔记的代价。我不喜欢这种被捆绑的感觉。

不过既然现在家里环境已经搞得不错了，那干脆在家里也搭建一套笔记服务吧![](./_image/2020-05-26/0110.png?r=50)

为知笔记提供了私有部署功能，虽然为知笔记也没有提供批量导出，不过毕竟数据库在我手里，还是有办法批量导出的。

# 数据安全

最后，数据无价，为了保护好自己的数据，请牢记以下几点：

1. 不要用默认端口
2. 一定要禁用默认账户
3. 使用强密码
4. 不暴露自己的私人服务域名
5. 使用 HTTPS
6. 不要把 SMB 暴露到公网

我就因为懒，FTP 没有改默认端口，就被扫描了。![](./_image/2020-05-26/2101.png?r=50)

![](./_image/2020-05-26/2020-05-27-14-41-37.png)

# 最后

现在市面上提供的一些服务，使用体验说不上十全十美，而且可能太过折腾了些![](./_image/2020-05-26/0200.png?r=50)。可以在日常使用中找痛点，然后慢慢动手完善，说不准可以孵化出一个创业项目![](./_image/2020-05-26/0370.png?r=50)