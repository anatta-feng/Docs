---
title: Shell 学习
date: 2017-5-23 17:05:25
categories: [笔记]
tags: [Shell]
---

# Shell 变量

## 定义变量

```Shell
name="Big Dog"
```

**变量名和`=`之间不能有空格**

其他和一般语言没啥两样

## 使用变量

定义的变量名前加`$`即可：

```Shell
name="Big Dog"
echo ${name}
echo $name
```

加不加花括号都是可以的，加花括号是为了识别变量名的边界，建议都加上花括号，良好的变成习惯！

## 只读变量

声明变量时在变量名前加上`readonly`前缀即可

```shell
readonly name="big dog"
```

只读变量不可再次赋值

## 删除变量

`unset`关键词

```shell
unset name
```

删除后的变量不能再次使用，只读变量不能删除

## 变量类型

* 局部变量
* 环境变量
* shell 变量

# Shell 字符串

字符串可以用单引号，也可以用双引号，单双引号有区别

区别：

* 单引号中的变量无效
* 单引号中不能出现单引号（加上转义字符也不行）
* 双引号可以有变量
* 双引号中可以出现转义字符

## 字符串拼接

```shell
name="Big Dog"
str="my name is ${name}"
```

发现和**Kotlin**的字符串模板是一模一样啊，应该说**Kotlin**的字符串模板和**Shell**的字符串拼接一模一样。可能语法就是那么几种吧，各中语言选择自己想要的语法

## 获取字符串长度

```shell
name="Big Dog"
echo ${#name}
```

## 截取字符串

```shell
str="my name"
# 从第2个开始往后截取4个
echo ${str:1:4}
```

# Shell 数组

bash 支持一维数组，不支持多维数组，不对数组大小做限制

## 定义数组

用括号表示数组，数组元素用“空格”分割

> 数组名={value1 value2 … valuen}

e.g.:

```shell
animals_array={'dog' 'cat' 'mouse'}
```

### 单独定义数组的各个变量

```shell
animals_array[0]='dog'
animals_array[1]='cat'
animals_array[2]='mouse'
```

 可以不使用连续的下标，下标的范围没有限制

## 读取数组

> ${数组名[下标]}

e.g.

```shell
dogName=$animals_array[0]
```

使用`@`可以获取数组中所有的元素

```shell
echo ${animals_array[@]}
```

## 获取数组的长度

与获取字符串长度是一样的

```shell
# 数组的长度
length=${#animals_array[@]}
# or
length=${#animals_array[*]}

# 数组单个元素的长度
length=${#animals_array[n]}
```

# Shell 注释

以`#`开头的一行就是注释

sh 中没有多行注释，只能一行加一个`#`

> 如果开发中有大段代码要先注释起来，待会有需要去掉注释，一行一行添加注释符号太麻烦，将	代码抽成一个函数，不调用就相当于注释

# 向 Shell 传递参数

可以在执行脚本的时候向脚本传递参数，脚本内获取参数的格式为`$n`。n 表示一个自然数，1为执行脚本的第一个参数，2为第二个，以此类推。0为文件名，或者说是启动脚本的命令

e.g.

```shell
echo "下面是给 Shell 传递的参数"
echo "执行的文件名： $0"
echo "第一个参数： $1"
echo "第二个参数： $2"
echo "第三个参数： $3"
```

还有一些特殊字符可以用来处理参数

| 参数处理 |               说明                |
| :--- | :-----------------------------: |
| $#   |           传递到脚本的参数个数            |
| $*   |      以一个单字符串显示出所有向脚本输出的参数       |
| $$   |          脚本运行的当前进程 ID           |
| $!   |         后台运行的最后一个进程的 ID         |
| $@   |         使用中发现和`$*`一模一样啊         |
| $-   |        显示 Shell 使用的当前选项         |
| $?   | 显示最后命令的退出状态，0表示没有错误，其他任何值到代表有错误 |

